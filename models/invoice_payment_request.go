// Code generated by go-swagger; DO NOT EDIT.

package models

// This file was generated by the swagger tool.
// Editing this file might prove futile when you re-run the swagger generate command

import (
	"strconv"

	"github.com/go-openapi/errors"
	"github.com/go-openapi/strfmt"
	"github.com/go-openapi/swag"
	"github.com/go-openapi/validate"
)

// InvoicePaymentRequest Describes a specific payment request in an invoice. You can have
// up to nine payment requests for an invoice.
//
// swagger:model InvoicePaymentRequest
type InvoicePaymentRequest struct {

	// If the request method is `CHARGE_CARD_ON_FILE`, this field provides the
	// card to charge.
	// Max Length: 255
	// Min Length: 1
	CardID string `json:"card_id,omitempty"`

	// The payment request amount, computed using the order amount and information from the various payment request fields (`invoice_request_type`,
	// `fixed_amount_requested_money`, and `percentage_requested`).
	ComputedAmountMoney *Money `json:"computed_amount_money,omitempty"`

	// The due date (in the invoice location's time zone) for the payment request.
	// After this date, the invoice becomes overdue.
	DueDate string `json:"due_date,omitempty"`

	// If the payment request specifies `DEPOSIT` or `INSTALLMENT` as the
	// `request_type`,
	// this indicates the request amount.
	// You cannot specify this when `request_type` is `BALANCE` or when the
	// payment request includes the `percentage_requested` field.
	FixedAmountRequestedMoney *Money `json:"fixed_amount_requested_money,omitempty"`

	// Specifies the amount for the payment request in percentage:
	//
	// - When the payment `request_type` is `DEPOSIT`, it is the percentage of the order total amount.
	// - When the payment `request_type` is `INSTALLMENT`, it is the percentage of the order total less
	// the deposit, if requested. The sum of the `percentage_requested` in all installment
	// payment requests must be equal to 100.
	//
	// You cannot specify this when the payment `request_type` is `BALANCE` or when the
	// payment request specifies the `fixed_amount_requested_money` field.
	PercentageRequested string `json:"percentage_requested,omitempty"`

	// A list of one or more reminders to send for the payment request.
	Reminders []*InvoicePaymentReminder `json:"reminders"`

	// Indicates how Square processes the payment request.
	// See [InvoiceRequestMethod](#type-invoicerequestmethod) for possible values
	RequestMethod string `json:"request_method,omitempty"`

	// Identifies the payment request type. This type defines how the payment request amount is determined.
	// See [InvoiceRequestType](#type-invoicerequesttype) for possible values
	RequestType string `json:"request_type,omitempty"`

	// If the most recent payment was a cash payment
	// in a currency that rounds cash payments (such as, `CAD` or `AUD`) and the payment
	// is rounded from `computed_amount_money` in the payment request, then this
	// field specifies the rounding adjustment applied. This amount
	// might be negative.
	RoundingAdjustmentIncludedMoney *Money `json:"rounding_adjustment_included_money,omitempty"`

	// If set to true, the Square-hosted invoice page (the `public_url` field of the invoice)
	// provides a place for the customer to pay a tip.
	//
	// This field is allowed only on the final payment request
	// and the payment `request_type` must be `BALANCE` or `INSTALLMENT`.
	TippingEnabled bool `json:"tipping_enabled,omitempty"`

	// The amount of money already paid for the specific payment request.
	// This amount might include a rounding adjustment if the most recent invoice payment
	// was in cash in a currency that rounds cash payments (such as, `CAD` or `AUD`).
	TotalCompletedAmountMoney *Money `json:"total_completed_amount_money,omitempty"`

	// The Square-generated ID of the payment request in an `invoice`.
	// Max Length: 255
	// Min Length: 1
	UID string `json:"uid,omitempty"`
}

// Validate validates this invoice payment request
func (m *InvoicePaymentRequest) Validate(formats strfmt.Registry) error {
	var res []error

	if err := m.validateCardID(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateComputedAmountMoney(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateFixedAmountRequestedMoney(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateReminders(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateRoundingAdjustmentIncludedMoney(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateTotalCompletedAmountMoney(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateUID(formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

func (m *InvoicePaymentRequest) validateCardID(formats strfmt.Registry) error {

	if swag.IsZero(m.CardID) { // not required
		return nil
	}

	if err := validate.MinLength("card_id", "body", string(m.CardID), 1); err != nil {
		return err
	}

	if err := validate.MaxLength("card_id", "body", string(m.CardID), 255); err != nil {
		return err
	}

	return nil
}

func (m *InvoicePaymentRequest) validateComputedAmountMoney(formats strfmt.Registry) error {

	if swag.IsZero(m.ComputedAmountMoney) { // not required
		return nil
	}

	if m.ComputedAmountMoney != nil {
		if err := m.ComputedAmountMoney.Validate(formats); err != nil {
			if ve, ok := err.(*errors.Validation); ok {
				return ve.ValidateName("computed_amount_money")
			}
			return err
		}
	}

	return nil
}

func (m *InvoicePaymentRequest) validateFixedAmountRequestedMoney(formats strfmt.Registry) error {

	if swag.IsZero(m.FixedAmountRequestedMoney) { // not required
		return nil
	}

	if m.FixedAmountRequestedMoney != nil {
		if err := m.FixedAmountRequestedMoney.Validate(formats); err != nil {
			if ve, ok := err.(*errors.Validation); ok {
				return ve.ValidateName("fixed_amount_requested_money")
			}
			return err
		}
	}

	return nil
}

func (m *InvoicePaymentRequest) validateReminders(formats strfmt.Registry) error {

	if swag.IsZero(m.Reminders) { // not required
		return nil
	}

	for i := 0; i < len(m.Reminders); i++ {
		if swag.IsZero(m.Reminders[i]) { // not required
			continue
		}

		if m.Reminders[i] != nil {
			if err := m.Reminders[i].Validate(formats); err != nil {
				if ve, ok := err.(*errors.Validation); ok {
					return ve.ValidateName("reminders" + "." + strconv.Itoa(i))
				}
				return err
			}
		}

	}

	return nil
}

func (m *InvoicePaymentRequest) validateRoundingAdjustmentIncludedMoney(formats strfmt.Registry) error {

	if swag.IsZero(m.RoundingAdjustmentIncludedMoney) { // not required
		return nil
	}

	if m.RoundingAdjustmentIncludedMoney != nil {
		if err := m.RoundingAdjustmentIncludedMoney.Validate(formats); err != nil {
			if ve, ok := err.(*errors.Validation); ok {
				return ve.ValidateName("rounding_adjustment_included_money")
			}
			return err
		}
	}

	return nil
}

func (m *InvoicePaymentRequest) validateTotalCompletedAmountMoney(formats strfmt.Registry) error {

	if swag.IsZero(m.TotalCompletedAmountMoney) { // not required
		return nil
	}

	if m.TotalCompletedAmountMoney != nil {
		if err := m.TotalCompletedAmountMoney.Validate(formats); err != nil {
			if ve, ok := err.(*errors.Validation); ok {
				return ve.ValidateName("total_completed_amount_money")
			}
			return err
		}
	}

	return nil
}

func (m *InvoicePaymentRequest) validateUID(formats strfmt.Registry) error {

	if swag.IsZero(m.UID) { // not required
		return nil
	}

	if err := validate.MinLength("uid", "body", string(m.UID), 1); err != nil {
		return err
	}

	if err := validate.MaxLength("uid", "body", string(m.UID), 255); err != nil {
		return err
	}

	return nil
}

// MarshalBinary interface implementation
func (m *InvoicePaymentRequest) MarshalBinary() ([]byte, error) {
	if m == nil {
		return nil, nil
	}
	return swag.WriteJSON(m)
}

// UnmarshalBinary interface implementation
func (m *InvoicePaymentRequest) UnmarshalBinary(b []byte) error {
	var res InvoicePaymentRequest
	if err := swag.ReadJSON(b, &res); err != nil {
		return err
	}
	*m = res
	return nil
}
